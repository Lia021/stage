<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
  <script src="https://sdk.altvr.com/libs/altspace.js/2.6.0/altspace.min.js"></script>
  <script>
    // n-skeleton-parent only works with root meshes at the moment. Since most model loaders use a root
    // container object, we need to collapse the model so that n-skeleton-parent can access the mesh directly.
    AFRAME.registerComponent('collapse-model', {
        init: function () {
            this.el.addEventListener('model-loaded', function () {
                this.el.object3DMap.mesh.updateMatrixWorld();
                var mesh;
                this.el.object3DMap.mesh.traverse(function (obj) {
                    if (!mesh && obj instanceof THREE.Mesh) {
                        mesh = obj;
                    }
                }.bind(this))
                if (mesh) {
                    this.el.sceneEl.object3D.updateMatrixWorld(true);
                    mesh.scale.copy(mesh.getWorldScale());
                    this.el.setObject3D('mesh', mesh);
                    // setObject3D emits this event in a-frame 0.4.0
                    this.el.emit('object3dset', {
                        type: 'mesh'
                    });
                }
            }.bind(this));
        }
    });
  </script>
  <script>
    altspace.getThreeJSTrackingSkeleton().then(function (skeleton) {
          window.head = skeleton.getJoint('Head');
        });
        AFRAME.registerComponent('altspace-look-at', {
          init: function () {
            if (!window.altspace || !altspace.inClient) { return; }
          },
          tick: function () {
            if (!window.head || !this.el.object3D) { return; }
            this.el.object3D.lookAt(window.head.position); 
          }
        })
  </script>

  <body>
    <a-scene altspace=fullspace:true sync-system="author: bookgirl; app: alt-stage">
        
 <a-assets>
     
    <a-asset-item id="stage" src="https://rawgit.com/Lia021/alt-stage/master/stage/dome2.dae"></a-asset-item>
    <a-asset-item id="rainbow" src="https://rawgit.com/Lia021/alt-stage/master/stage/rainbow.dae"></a-asset-item>
    <a-asset-item id="cover" src="https://rawgit.com/Lia021/alt-stage/master/stage/covor.dae"></a-asset-item>
    <a-asset-item id="circle" src="https://rawgit.com/Lia021/alt-stage/master/stage/circle.dae"></a-asset-item>
    <a-asset-item id="table" src="https://rawgit.com/Lia021/alt-stage/master/stage/table3.dae"></a-asset-item>
    <a-asset-item id="altspace" src="https://rawgit.com/Lia021/alt-stage/master/stage/trangle.dae"></a-asset-item>
    <a-asset-item id="stagefloor" src="https://rawgit.com/Lia021/alt-stage/master/floor1.dae"></a-asset-item>
    <a-asset-item id="stagefloor2" src="https://rawgit.com/Lia021/alt-stage/master/stage%20tile.dae"></a-asset-item>
    
       
 
     
     
     
     
     
 </a-assets>
      
      
 <!--stage-->
     
 <a-entity position="0 0 0" scale="37 37 37"  collada-model="#stage"> <a-animation attribute="rotation" dur="340000" fill="forwards" to="0 -360 0" repeat="indefinite" easing="linear"></a-animation></a-entity>
    
  <!--rainbow-->
     
  <a-entity position="0 0 0" scale="37.50 37.50 37.50"  collada-model="#rainbow"n-mesh-collider="type: environment; convex: false"> <a-animation attribute="rotation" dur="35000" fill="forwards" to="0 360 0" repeat="indefinite" easing="linear"></a-animation></a-entity>
  
  <!--cover-->
     
  <a-entity position="0 0 0" scale="37.80 37.70 37.80" rotation="0 360 0" collada-model="#cover"n-mesh-collider="type: environment; convex: false"></a-entity>
 
  <!--circle-->
     

  <a-entity position="0 -0.05 0" scale="4 4 4" collada-model="#circle"n-mesh-collider="type: environment; convex: false"></a-entity>
  
  <!--table-->
     
  <a-entity position="0 1.20 0" scale="1.10 1.10 1.10" collada-model="#table"n-mesh-collider="type: environment; convex: false"></a-entity>
    
  <!--altspace-->
     
 <a-entity position="0 2 0" scale="1 1 1"  collada-model="#altspace"> <a-animation attribute="rotation" dur="32000" fill="forwards" to="0 360 0" repeat="indefinite" easing="linear"></a-animation></a-entity>

 <!--sky-->

 <a-sky src="https://rawgit.com/Lia021/hunted-birthday/master/star2.jpg"radius="300"></a-sky>

 <!--stagefloor-->

 <a-entity position="0 -0.03 0" scale="37 37 37" collada-model="#stagefloor"><a-animation attribute="rotation" dur="100000" fill="forwards" to="0 -360 0" repeat="indefinite" easing="linear"></a-animation></a-entity>
  
  <!--stagefloor2-->

  <a-entity position="0 -0.05 0" scale="36.70 36.70 36.70" collada-model="#stagefloor2"><a-animation attribute="rotation" dur="100000" fill="forwards" to="0 360 0" repeat="indefinite" easing="linear"></a-animation></a-entity>
  

